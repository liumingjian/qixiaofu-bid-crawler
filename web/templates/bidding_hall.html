{% extends "layout.html" %}

{% block page_title %}招标大厅{% endblock %}

{% block content %}
<div class="card" style="margin-bottom: var(--spacing-6);">
    <!-- 过滤栏 -->
    <div class="filter-bar" style="display: flex; gap: var(--spacing-4); flex-wrap: wrap; align-items: center;">
        <div style="flex: 1; min-width: 200px;">
            <input type="text" id="searchInput" placeholder="搜索项目名称或采购人..." onkeyup="debounce(loadBids, 500)()">
        </div>
        <div style="width: 150px;">
            <select id="statusFilter" onchange="loadBids()">
                <option value="all">全部状态</option>
                <option value="new">新发现</option>
                <option value="notified">已通知</option>
                <option value="archived">已归档</option>
            </select>
        </div>
        <div>
            <button class="btn-secondary" onclick="loadBids()">
                <i class="bi bi-arrow-clockwise"></i> 刷新
            </button>
        </div>
    </div>
</div>

<!-- 表格列表 -->
<div class="table-wrapper">
    <table class="bid-table">
        <thead>
            <tr>
                <th width="140">发布时间</th>
                <th>项目名称</th>
                <th width="120">预算金额</th>
                <th width="180">采购人</th>
                <th width="100">状态</th>
                <th width="80">操作</th>
            </tr>
        </thead>
        <tbody id="bidsTableBody">
            <!-- JS 动态加载 -->
        </tbody>
    </table>
    <!-- 空状态 -->
    <div id="emptyState" style="padding: 40px; text-align: center; display: none;">
        <i class="bi bi-inbox" style="font-size: 48px; color: var(--text-tertiary);"></i>
        <p style="color: var(--text-secondary); margin-top: 16px;">暂无数据</p>
    </div>
    <!-- 加载状态 -->
    <div id="loadingState" style="padding: 40px; text-align: center;">
        <div class="loading-spinner" style="margin: 0 auto;"></div>
        <p style="color: var(--text-secondary); margin-top: 16px;">正在加载...</p>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', () => {
        loadBids();
    });
</script>
{% endblock %}
